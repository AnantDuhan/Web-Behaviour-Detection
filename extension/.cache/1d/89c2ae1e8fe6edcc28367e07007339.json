{"id":"content/scoring.js","dependencies":[{"name":"D:\\CodingMaterial\\Mini-Project\\web-behaviour-detection\\extension\\package.json","includedInParent":true,"mtime":1663842605450},{"name":"./common.js","loc":{"line":8,"column":7,"index":140},"parent":"D:\\CodingMaterial\\Mini-Project\\web-behaviour-detection\\extension\\src\\content\\scoring.js","resolved":"D:\\CodingMaterial\\Mini-Project\\web-behaviour-detection\\extension\\src\\content\\common.js"},{"name":"../settings.js","loc":{"line":10,"column":32,"index":190},"parent":"D:\\CodingMaterial\\Mini-Project\\web-behaviour-detection\\extension\\src\\content\\scoring.js","resolved":"D:\\CodingMaterial\\Mini-Project\\web-behaviour-detection\\extension\\src\\settings.js"},{"name":"./backends.js","loc":{"line":12,"column":78,"index":288},"parent":"D:\\CodingMaterial\\Mini-Project\\web-behaviour-detection\\extension\\src\\content\\scoring.js","resolved":"D:\\CodingMaterial\\Mini-Project\\web-behaviour-detection\\extension\\src\\content\\backends.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NegativityScorer = void 0;\n\nvar _common = require(\"./common.js\");\n\nvar _settings = require(\"../settings.js\");\n\nvar _backends = require(\"./backends.js\");\n\n/**\r\n * Processes and updates negativity data for elements\r\n */\nclass NegativityScorer {\n  // constants\n  static textNodesSelector = 'div,h1,h2,h3,h4,h5,p,span,li,a,img,strong,em,\\\r\n    font,big,small,b,i,u,td,yt-formatted-string';\n  static wordPattern = /[a-z]{3,}/gi;\n  static minNumWords = 5;\n  static minNumElements = 5; // state\n\n  static stats;\n  static settings_ = {};\n  static backends = {\n    'pyflair': _backends.PythonBackendNegativity,\n    'jsvader': _backends.JSNegativityVader,\n    'jsafinn': _backends.JSNegativityAFINN\n  };\n\n  static updateAll(restyleCallback) {\n    chrome.storage.local.get({\n      storedSettings: {\n        global: _settings.defaultSettings\n      }\n    }, stored => {\n      this.settings_ = stored.storedSettings[(0, _common.domain)()] || stored.storedSettings.global;\n      this.updateAll_(restyleCallback);\n    });\n  }\n\n  static updateAll_(restyleCallback) {\n    const allElements = this.qualifiedTextElements(document.querySelectorAll(\"*\"), false);\n    this.removeAllValues_(allElements);\n\n    if (this.settings_.enabled && this.settings_.backend != 'off' && allElements.length >= this.minNumElements) {\n      // console.log(`scoring ${allElements.length} text elements`);\n      // claculations need to be done\n      this.backends[this.settings_.backend].processElements(allElements, (chunkElements, chunkValues) => {\n        this.setNegativityValues_(chunkElements, chunkValues); // update all ranks for all elements\n\n        this.updateNegativityRanks_(allElements);\n        this.stats = this.calculateStats_(allElements);\n        restyleCallback();\n      });\n    } else {\n      // reset all\n      this.stats = {};\n      restyleCallback();\n    }\n  }\n\n  static qualifyTextElement_(el) {\n    if (el instanceof HTMLElement && el.matches(this.textNodesSelector)) {\n      const text = (0, _common.extractElementText)(el);\n      return (0, _common.countMatches)(text, this.wordPattern) >= this.minNumWords;\n    } else return false;\n  }\n\n  static qualifiedTextElements(elements, withChildren = true) {\n    const filtered = new Set();\n    [...elements].forEach(parent => {\n      // check the element\n      if (this.qualifyTextElement_(parent)) filtered.add(parent);\n\n      if (withChildren && parent instanceof HTMLElement) {\n        [...parent.querySelectorAll(this.textNodesSelector)].filter(el => this.qualifyTextElement_(el)).map(el => filtered.add(el));\n      }\n    });\n    return [...filtered];\n  }\n\n  static setNegativityValues_(elements, values) {\n    elements.forEach((el, i) => {\n      el.classList.add(_common.scoredTextsClassName);\n      el.setAttribute(_common.scoredTextsValueAtt, values[i]);\n    });\n  }\n\n  static updateNegativityRanks_(elements) {\n    const ranks = this.arrayDenseRanks_(this.negativityValues_(elements));\n    const maxRank = Math.max.apply(null, ranks);\n    elements.forEach((el, i) => {\n      el.setAttribute(_common.scoredTextsRankAtt, ranks[i] / maxRank);\n    });\n  }\n\n  static removeAllValues_(elements) {\n    elements.forEach(el => {\n      el.classList.remove(_common.scoredTextsClassName);\n      el.removeAttribute(_common.scoredTextsValueAtt);\n      el.removeAttribute(_common.scoredTextsRankAtt);\n    });\n  }\n\n  static negativityValues_(elements) {\n    return [...elements].map(el => parseFloat(el.getAttribute(_common.scoredTextsValueAtt)));\n  }\n\n  static arrayDenseRanks_(arr) {\n    const sorted = Array.from(new Set(arr)).sort((a, b) => a - b);\n    const ranks = arr.map(v => sorted.indexOf(v) + 1);\n    return ranks;\n  }\n\n  static calculateStats_(elements) {\n    const values = this.negativityValues_(elements);\n    return {\n      negatives: values.filter(v => v > 0.5).length,\n      total: values.length\n    };\n  }\n\n}\n\nexports.NegativityScorer = NegativityScorer;"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":8,"column":0},"source":"content/scoring.js","original":{"line":1,"column":0}},{"generated":{"line":10,"column":0},"source":"content/scoring.js","original":{"line":10,"column":0}},{"generated":{"line":12,"column":0},"source":"content/scoring.js","original":{"line":12,"column":0}},{"generated":{"line":14,"column":0},"source":"content/scoring.js","original":{"line":14,"column":0}},{"generated":{"line":15,"column":0},"source":"content/scoring.js","original":{"line":15,"column":0}},{"generated":{"line":16,"column":0},"source":"content/scoring.js","original":{"line":16,"column":0}},{"generated":{"line":17,"column":0},"source":"content/scoring.js","original":{"line":17,"column":7}},{"generated":{"line":17,"column":6},"source":"content/scoring.js","original":{"line":17,"column":13},"name":"NegativityScorer"},{"generated":{"line":17,"column":22},"source":"content/scoring.js","original":{"line":17,"column":7}},{"generated":{"line":17,"column":23},"source":"content/scoring.js","original":{"line":17,"column":30}},{"generated":{"line":18,"column":2},"source":"content/scoring.js","original":{"line":18,"column":2}},{"generated":{"line":19,"column":2},"source":"content/scoring.js","original":{"line":19,"column":26}},{"generated":{"line":19,"column":9},"source":"content/scoring.js","original":{"line":19,"column":9},"name":"textNodesSelector"},{"generated":{"line":19,"column":26},"source":"content/scoring.js","original":{"line":19,"column":26}},{"generated":{"line":19,"column":29},"source":"content/scoring.js","original":{"line":20,"column":4}},{"generated":{"line":20,"column":0},"source":"content/scoring.js","original":{"line":21,"column":0}},{"generated":{"line":20,"column":48},"source":"content/scoring.js","original":{"line":19,"column":26}},{"generated":{"line":21,"column":2},"source":"content/scoring.js","original":{"line":22,"column":20}},{"generated":{"line":21,"column":9},"source":"content/scoring.js","original":{"line":22,"column":9},"name":"wordPattern"},{"generated":{"line":21,"column":20},"source":"content/scoring.js","original":{"line":22,"column":20}},{"generated":{"line":21,"column":23},"source":"content/scoring.js","original":{"line":22,"column":23}},{"generated":{"line":21,"column":36},"source":"content/scoring.js","original":{"line":22,"column":20}},{"generated":{"line":22,"column":2},"source":"content/scoring.js","original":{"line":23,"column":20}},{"generated":{"line":22,"column":9},"source":"content/scoring.js","original":{"line":23,"column":9},"name":"minNumWords"},{"generated":{"line":22,"column":20},"source":"content/scoring.js","original":{"line":23,"column":20}},{"generated":{"line":22,"column":23},"source":"content/scoring.js","original":{"line":23,"column":23}},{"generated":{"line":22,"column":24},"source":"content/scoring.js","original":{"line":23,"column":20}},{"generated":{"line":23,"column":2},"source":"content/scoring.js","original":{"line":24,"column":23}},{"generated":{"line":23,"column":9},"source":"content/scoring.js","original":{"line":24,"column":9},"name":"minNumElements"},{"generated":{"line":23,"column":23},"source":"content/scoring.js","original":{"line":24,"column":23}},{"generated":{"line":23,"column":26},"source":"content/scoring.js","original":{"line":24,"column":26}},{"generated":{"line":23,"column":27},"source":"content/scoring.js","original":{"line":24,"column":23}},{"generated":{"line":23,"column":28},"source":"content/scoring.js","original":{"line":17,"column":30}},{"generated":{"line":23,"column":29},"source":"content/scoring.js","original":{"line":25,"column":2}},{"generated":{"line":25,"column":2},"source":"content/scoring.js","original":{"line":26,"column":14}},{"generated":{"line":25,"column":9},"source":"content/scoring.js","original":{"line":26,"column":9},"name":"stats"},{"generated":{"line":25,"column":14},"source":"content/scoring.js","original":{"line":26,"column":14}},{"generated":{"line":26,"column":2},"source":"content/scoring.js","original":{"line":27,"column":18}},{"generated":{"line":26,"column":9},"source":"content/scoring.js","original":{"line":27,"column":9},"name":"settings_"},{"generated":{"line":26,"column":18},"source":"content/scoring.js","original":{"line":27,"column":18}},{"generated":{"line":26,"column":21},"source":"content/scoring.js","original":{"line":27,"column":21}},{"generated":{"line":26,"column":23},"source":"content/scoring.js","original":{"line":27,"column":18}},{"generated":{"line":27,"column":2},"source":"content/scoring.js","original":{"line":29,"column":17}},{"generated":{"line":27,"column":9},"source":"content/scoring.js","original":{"line":29,"column":9},"name":"backends"},{"generated":{"line":27,"column":17},"source":"content/scoring.js","original":{"line":29,"column":17}},{"generated":{"line":27,"column":20},"source":"content/scoring.js","original":{"line":29,"column":20}},{"generated":{"line":28,"column":4},"source":"content/scoring.js","original":{"line":30,"column":4}},{"generated":{"line":28,"column":15},"source":"content/scoring.js","original":{"line":30,"column":15},"name":"PythonBackendNegativity"},{"generated":{"line":28,"column":48},"source":"content/scoring.js","original":{"line":29,"column":20}},{"generated":{"line":29,"column":4},"source":"content/scoring.js","original":{"line":31,"column":4}},{"generated":{"line":29,"column":15},"source":"content/scoring.js","original":{"line":31,"column":15},"name":"JSNegativityVader"},{"generated":{"line":29,"column":42},"source":"content/scoring.js","original":{"line":29,"column":20}},{"generated":{"line":30,"column":4},"source":"content/scoring.js","original":{"line":32,"column":4}},{"generated":{"line":30,"column":15},"source":"content/scoring.js","original":{"line":32,"column":15},"name":"JSNegativityAFINN"},{"generated":{"line":31,"column":2},"source":"content/scoring.js","original":{"line":29,"column":20}},{"generated":{"line":31,"column":3},"source":"content/scoring.js","original":{"line":29,"column":17}},{"generated":{"line":33,"column":2},"source":"content/scoring.js","original":{"line":35,"column":18}},{"generated":{"line":33,"column":9},"source":"content/scoring.js","original":{"line":35,"column":9},"name":"updateAll"},{"generated":{"line":33,"column":18},"source":"content/scoring.js","original":{"line":35,"column":18}},{"generated":{"line":33,"column":19},"source":"content/scoring.js","original":{"line":35,"column":19},"name":"restyleCallback"},{"generated":{"line":33,"column":34},"source":"content/scoring.js","original":{"line":35,"column":18}},{"generated":{"line":33,"column":36},"source":"content/scoring.js","original":{"line":35,"column":36}},{"generated":{"line":34,"column":4},"source":"content/scoring.js","original":{"line":36,"column":4},"name":"chrome"},{"generated":{"line":34,"column":10},"source":"content/scoring.js","original":{"line":36,"column":10}},{"generated":{"line":34,"column":11},"source":"content/scoring.js","original":{"line":36,"column":11},"name":"storage"},{"generated":{"line":34,"column":18},"source":"content/scoring.js","original":{"line":36,"column":4}},{"generated":{"line":34,"column":19},"source":"content/scoring.js","original":{"line":36,"column":19},"name":"local"},{"generated":{"line":34,"column":24},"source":"content/scoring.js","original":{"line":36,"column":4}},{"generated":{"line":34,"column":25},"source":"content/scoring.js","original":{"line":36,"column":25},"name":"get"},{"generated":{"line":34,"column":28},"source":"content/scoring.js","original":{"line":36,"column":4}},{"generated":{"line":34,"column":29},"source":"content/scoring.js","original":{"line":37,"column":6}},{"generated":{"line":35,"column":6},"source":"content/scoring.js","original":{"line":38,"column":8},"name":"storedSettings"},{"generated":{"line":35,"column":20},"source":"content/scoring.js","original":{"line":38,"column":22}},{"generated":{"line":35,"column":22},"source":"content/scoring.js","original":{"line":38,"column":24}},{"generated":{"line":36,"column":8},"source":"content/scoring.js","original":{"line":38,"column":26},"name":"global"},{"generated":{"line":36,"column":14},"source":"content/scoring.js","original":{"line":38,"column":32}},{"generated":{"line":36,"column":16},"source":"content/scoring.js","original":{"line":38,"column":34},"name":"defaultSettings"},{"generated":{"line":37,"column":6},"source":"content/scoring.js","original":{"line":38,"column":24}},{"generated":{"line":38,"column":4},"source":"content/scoring.js","original":{"line":37,"column":6}},{"generated":{"line":38,"column":5},"source":"content/scoring.js","original":{"line":36,"column":4}},{"generated":{"line":38,"column":7},"source":"content/scoring.js","original":{"line":40,"column":7},"name":"stored"},{"generated":{"line":38,"column":13},"source":"content/scoring.js","original":{"line":40,"column":6}},{"generated":{"line":38,"column":17},"source":"content/scoring.js","original":{"line":40,"column":18}},{"generated":{"line":39,"column":6},"source":"content/scoring.js","original":{"line":41,"column":8}},{"generated":{"line":39,"column":11},"source":"content/scoring.js","original":{"line":41,"column":13},"name":"settings_"},{"generated":{"line":39,"column":20},"source":"content/scoring.js","original":{"line":41,"column":8}},{"generated":{"line":39,"column":23},"source":"content/scoring.js","original":{"line":41,"column":25},"name":"stored"},{"generated":{"line":39,"column":29},"source":"content/scoring.js","original":{"line":41,"column":31}},{"generated":{"line":39,"column":30},"source":"content/scoring.js","original":{"line":41,"column":32},"name":"storedSettings"},{"generated":{"line":39,"column":44},"source":"content/scoring.js","original":{"line":41,"column":25}},{"generated":{"line":39,"column":45},"source":"content/scoring.js","original":{"line":41,"column":47}},{"generated":{"line":39,"column":49},"source":"content/scoring.js","original":{"line":41,"column":47},"name":"domain"},{"generated":{"line":39,"column":63},"source":"content/scoring.js","original":{"line":41,"column":47}},{"generated":{"line":39,"column":66},"source":"content/scoring.js","original":{"line":41,"column":25}},{"generated":{"line":39,"column":71},"source":"content/scoring.js","original":{"line":41,"column":60},"name":"stored"},{"generated":{"line":39,"column":77},"source":"content/scoring.js","original":{"line":41,"column":66}},{"generated":{"line":39,"column":78},"source":"content/scoring.js","original":{"line":41,"column":67},"name":"storedSettings"},{"generated":{"line":39,"column":92},"source":"content/scoring.js","original":{"line":41,"column":60}},{"generated":{"line":39,"column":93},"source":"content/scoring.js","original":{"line":41,"column":82},"name":"global"},{"generated":{"line":39,"column":99},"source":"content/scoring.js","original":{"line":41,"column":8}},{"generated":{"line":40,"column":6},"source":"content/scoring.js","original":{"line":42,"column":8}},{"generated":{"line":40,"column":11},"source":"content/scoring.js","original":{"line":42,"column":13},"name":"updateAll_"},{"generated":{"line":40,"column":21},"source":"content/scoring.js","original":{"line":42,"column":8}},{"generated":{"line":40,"column":22},"source":"content/scoring.js","original":{"line":42,"column":24},"name":"restyleCallback"},{"generated":{"line":40,"column":37},"source":"content/scoring.js","original":{"line":42,"column":8}},{"generated":{"line":41,"column":4},"source":"content/scoring.js","original":{"line":43,"column":7}},{"generated":{"line":41,"column":5},"source":"content/scoring.js","original":{"line":36,"column":4}},{"generated":{"line":42,"column":2},"source":"content/scoring.js","original":{"line":44,"column":3}},{"generated":{"line":44,"column":2},"source":"content/scoring.js","original":{"line":46,"column":19}},{"generated":{"line":44,"column":9},"source":"content/scoring.js","original":{"line":46,"column":9},"name":"updateAll_"},{"generated":{"line":44,"column":19},"source":"content/scoring.js","original":{"line":46,"column":19}},{"generated":{"line":44,"column":20},"source":"content/scoring.js","original":{"line":46,"column":20},"name":"restyleCallback"},{"generated":{"line":44,"column":35},"source":"content/scoring.js","original":{"line":46,"column":19}},{"generated":{"line":44,"column":37},"source":"content/scoring.js","original":{"line":46,"column":37}},{"generated":{"line":45,"column":4},"source":"content/scoring.js","original":{"line":47,"column":4}},{"generated":{"line":45,"column":10},"source":"content/scoring.js","original":{"line":47,"column":10},"name":"allElements"},{"generated":{"line":45,"column":21},"source":"content/scoring.js","original":{"line":47,"column":21}},{"generated":{"line":45,"column":24},"source":"content/scoring.js","original":{"line":47,"column":24}},{"generated":{"line":45,"column":29},"source":"content/scoring.js","original":{"line":47,"column":29},"name":"qualifiedTextElements"},{"generated":{"line":45,"column":50},"source":"content/scoring.js","original":{"line":47,"column":24}},{"generated":{"line":45,"column":51},"source":"content/scoring.js","original":{"line":47,"column":51},"name":"document"},{"generated":{"line":45,"column":59},"source":"content/scoring.js","original":{"line":47,"column":59}},{"generated":{"line":45,"column":60},"source":"content/scoring.js","original":{"line":47,"column":60},"name":"querySelectorAll"},{"generated":{"line":45,"column":76},"source":"content/scoring.js","original":{"line":47,"column":51}},{"generated":{"line":45,"column":77},"source":"content/scoring.js","original":{"line":47,"column":77}},{"generated":{"line":45,"column":80},"source":"content/scoring.js","original":{"line":47,"column":51}},{"generated":{"line":45,"column":81},"source":"content/scoring.js","original":{"line":47,"column":24}},{"generated":{"line":45,"column":83},"source":"content/scoring.js","original":{"line":47,"column":83}},{"generated":{"line":45,"column":88},"source":"content/scoring.js","original":{"line":47,"column":24}},{"generated":{"line":45,"column":89},"source":"content/scoring.js","original":{"line":47,"column":4}},{"generated":{"line":46,"column":4},"source":"content/scoring.js","original":{"line":48,"column":4}},{"generated":{"line":46,"column":9},"source":"content/scoring.js","original":{"line":48,"column":9},"name":"removeAllValues_"},{"generated":{"line":46,"column":25},"source":"content/scoring.js","original":{"line":48,"column":4}},{"generated":{"line":46,"column":26},"source":"content/scoring.js","original":{"line":48,"column":26},"name":"allElements"},{"generated":{"line":46,"column":37},"source":"content/scoring.js","original":{"line":48,"column":4}},{"generated":{"line":48,"column":4},"source":"content/scoring.js","original":{"line":49,"column":4}},{"generated":{"line":48,"column":8},"source":"content/scoring.js","original":{"line":50,"column":9}},{"generated":{"line":48,"column":13},"source":"content/scoring.js","original":{"line":50,"column":14},"name":"settings_"},{"generated":{"line":48,"column":22},"source":"content/scoring.js","original":{"line":50,"column":9}},{"generated":{"line":48,"column":23},"source":"content/scoring.js","original":{"line":50,"column":24},"name":"enabled"},{"generated":{"line":48,"column":30},"source":"content/scoring.js","original":{"line":50,"column":8}},{"generated":{"line":48,"column":34},"source":"content/scoring.js","original":{"line":51,"column":9}},{"generated":{"line":48,"column":39},"source":"content/scoring.js","original":{"line":51,"column":14},"name":"settings_"},{"generated":{"line":48,"column":48},"source":"content/scoring.js","original":{"line":51,"column":9}},{"generated":{"line":48,"column":49},"source":"content/scoring.js","original":{"line":51,"column":24},"name":"backend"},{"generated":{"line":48,"column":56},"source":"content/scoring.js","original":{"line":51,"column":9}},{"generated":{"line":48,"column":60},"source":"content/scoring.js","original":{"line":51,"column":35}},{"generated":{"line":48,"column":65},"source":"content/scoring.js","original":{"line":50,"column":8}},{"generated":{"line":48,"column":69},"source":"content/scoring.js","original":{"line":52,"column":9},"name":"allElements"},{"generated":{"line":48,"column":80},"source":"content/scoring.js","original":{"line":52,"column":20}},{"generated":{"line":48,"column":81},"source":"content/scoring.js","original":{"line":52,"column":21},"name":"length"},{"generated":{"line":48,"column":87},"source":"content/scoring.js","original":{"line":52,"column":9}},{"generated":{"line":48,"column":91},"source":"content/scoring.js","original":{"line":52,"column":31}},{"generated":{"line":48,"column":96},"source":"content/scoring.js","original":{"line":52,"column":36},"name":"minNumElements"},{"generated":{"line":48,"column":110},"source":"content/scoring.js","original":{"line":49,"column":4}},{"generated":{"line":48,"column":112},"source":"content/scoring.js","original":{"line":53,"column":10}},{"generated":{"line":49,"column":6},"source":"content/scoring.js","original":{"line":54,"column":6}},{"generated":{"line":50,"column":6},"source":"content/scoring.js","original":{"line":55,"column":6}},{"generated":{"line":51,"column":6},"source":"content/scoring.js","original":{"line":56,"column":6}},{"generated":{"line":51,"column":11},"source":"content/scoring.js","original":{"line":56,"column":11},"name":"backends"},{"generated":{"line":51,"column":19},"source":"content/scoring.js","original":{"line":56,"column":6}},{"generated":{"line":51,"column":20},"source":"content/scoring.js","original":{"line":56,"column":20}},{"generated":{"line":51,"column":25},"source":"content/scoring.js","original":{"line":56,"column":25},"name":"settings_"},{"generated":{"line":51,"column":34},"source":"content/scoring.js","original":{"line":56,"column":20}},{"generated":{"line":51,"column":35},"source":"content/scoring.js","original":{"line":56,"column":35},"name":"backend"},{"generated":{"line":51,"column":42},"source":"content/scoring.js","original":{"line":56,"column":6}},{"generated":{"line":51,"column":44},"source":"content/scoring.js","original":{"line":56,"column":44},"name":"processElements"},{"generated":{"line":51,"column":59},"source":"content/scoring.js","original":{"line":56,"column":6}},{"generated":{"line":51,"column":60},"source":"content/scoring.js","original":{"line":57,"column":8},"name":"allElements"},{"generated":{"line":51,"column":71},"source":"content/scoring.js","original":{"line":56,"column":6}},{"generated":{"line":51,"column":73},"source":"content/scoring.js","original":{"line":58,"column":8}},{"generated":{"line":51,"column":74},"source":"content/scoring.js","original":{"line":58,"column":9},"name":"chunkElements"},{"generated":{"line":51,"column":87},"source":"content/scoring.js","original":{"line":58,"column":8}},{"generated":{"line":51,"column":89},"source":"content/scoring.js","original":{"line":58,"column":24},"name":"chunkValues"},{"generated":{"line":51,"column":100},"source":"content/scoring.js","original":{"line":58,"column":8}},{"generated":{"line":51,"column":105},"source":"content/scoring.js","original":{"line":58,"column":40}},{"generated":{"line":52,"column":8},"source":"content/scoring.js","original":{"line":59,"column":10}},{"generated":{"line":52,"column":13},"source":"content/scoring.js","original":{"line":59,"column":15},"name":"setNegativityValues_"},{"generated":{"line":52,"column":33},"source":"content/scoring.js","original":{"line":59,"column":10}},{"generated":{"line":52,"column":34},"source":"content/scoring.js","original":{"line":59,"column":36},"name":"chunkElements"},{"generated":{"line":52,"column":47},"source":"content/scoring.js","original":{"line":59,"column":10}},{"generated":{"line":52,"column":49},"source":"content/scoring.js","original":{"line":59,"column":51},"name":"chunkValues"},{"generated":{"line":52,"column":60},"source":"content/scoring.js","original":{"line":59,"column":10}},{"generated":{"line":52,"column":62},"source":"content/scoring.js","original":{"line":58,"column":40}},{"generated":{"line":52,"column":63},"source":"content/scoring.js","original":{"line":60,"column":10}},{"generated":{"line":54,"column":8},"source":"content/scoring.js","original":{"line":61,"column":10}},{"generated":{"line":54,"column":13},"source":"content/scoring.js","original":{"line":61,"column":15},"name":"updateNegativityRanks_"},{"generated":{"line":54,"column":35},"source":"content/scoring.js","original":{"line":61,"column":10}},{"generated":{"line":54,"column":36},"source":"content/scoring.js","original":{"line":61,"column":38},"name":"allElements"},{"generated":{"line":54,"column":47},"source":"content/scoring.js","original":{"line":61,"column":10}},{"generated":{"line":55,"column":8},"source":"content/scoring.js","original":{"line":62,"column":10}},{"generated":{"line":55,"column":13},"source":"content/scoring.js","original":{"line":62,"column":15},"name":"stats"},{"generated":{"line":55,"column":18},"source":"content/scoring.js","original":{"line":62,"column":10}},{"generated":{"line":55,"column":21},"source":"content/scoring.js","original":{"line":62,"column":23}},{"generated":{"line":55,"column":26},"source":"content/scoring.js","original":{"line":62,"column":28},"name":"calculateStats_"},{"generated":{"line":55,"column":41},"source":"content/scoring.js","original":{"line":62,"column":23}},{"generated":{"line":55,"column":42},"source":"content/scoring.js","original":{"line":62,"column":44},"name":"allElements"},{"generated":{"line":55,"column":53},"source":"content/scoring.js","original":{"line":62,"column":23}},{"generated":{"line":55,"column":54},"source":"content/scoring.js","original":{"line":62,"column":10}},{"generated":{"line":56,"column":8},"source":"content/scoring.js","original":{"line":63,"column":10},"name":"restyleCallback"},{"generated":{"line":56,"column":23},"source":"content/scoring.js","original":{"line":63,"column":25}},{"generated":{"line":57,"column":6},"source":"content/scoring.js","original":{"line":64,"column":9}},{"generated":{"line":57,"column":7},"source":"content/scoring.js","original":{"line":56,"column":6}},{"generated":{"line":58,"column":4},"source":"content/scoring.js","original":{"line":65,"column":5}},{"generated":{"line":58,"column":5},"source":"content/scoring.js","original":{"line":49,"column":4}},{"generated":{"line":58,"column":11},"source":"content/scoring.js","original":{"line":65,"column":11}},{"generated":{"line":59,"column":6},"source":"content/scoring.js","original":{"line":66,"column":6}},{"generated":{"line":60,"column":6},"source":"content/scoring.js","original":{"line":67,"column":6}},{"generated":{"line":60,"column":11},"source":"content/scoring.js","original":{"line":67,"column":11},"name":"stats"},{"generated":{"line":60,"column":16},"source":"content/scoring.js","original":{"line":67,"column":6}},{"generated":{"line":60,"column":19},"source":"content/scoring.js","original":{"line":67,"column":19}},{"generated":{"line":60,"column":21},"source":"content/scoring.js","original":{"line":67,"column":6}},{"generated":{"line":61,"column":6},"source":"content/scoring.js","original":{"line":68,"column":6},"name":"restyleCallback"},{"generated":{"line":61,"column":21},"source":"content/scoring.js","original":{"line":68,"column":21}},{"generated":{"line":62,"column":4},"source":"content/scoring.js","original":{"line":69,"column":5}},{"generated":{"line":63,"column":2},"source":"content/scoring.js","original":{"line":70,"column":3}},{"generated":{"line":65,"column":2},"source":"content/scoring.js","original":{"line":72,"column":28}},{"generated":{"line":65,"column":9},"source":"content/scoring.js","original":{"line":72,"column":9},"name":"qualifyTextElement_"},{"generated":{"line":65,"column":28},"source":"content/scoring.js","original":{"line":72,"column":28}},{"generated":{"line":65,"column":29},"source":"content/scoring.js","original":{"line":72,"column":29},"name":"el"},{"generated":{"line":65,"column":31},"source":"content/scoring.js","original":{"line":72,"column":28}},{"generated":{"line":65,"column":33},"source":"content/scoring.js","original":{"line":72,"column":33}},{"generated":{"line":66,"column":4},"source":"content/scoring.js","original":{"line":73,"column":4}},{"generated":{"line":66,"column":8},"source":"content/scoring.js","original":{"line":73,"column":9},"name":"el"},{"generated":{"line":66,"column":10},"source":"content/scoring.js","original":{"line":73,"column":11}},{"generated":{"line":66,"column":22},"source":"content/scoring.js","original":{"line":73,"column":23},"name":"HTMLElement"},{"generated":{"line":66,"column":33},"source":"content/scoring.js","original":{"line":73,"column":8}},{"generated":{"line":66,"column":37},"source":"content/scoring.js","original":{"line":73,"column":40},"name":"el"},{"generated":{"line":66,"column":39},"source":"content/scoring.js","original":{"line":73,"column":42}},{"generated":{"line":66,"column":40},"source":"content/scoring.js","original":{"line":73,"column":43},"name":"matches"},{"generated":{"line":66,"column":47},"source":"content/scoring.js","original":{"line":73,"column":40}},{"generated":{"line":66,"column":48},"source":"content/scoring.js","original":{"line":73,"column":51}},{"generated":{"line":66,"column":53},"source":"content/scoring.js","original":{"line":73,"column":56},"name":"textNodesSelector"},{"generated":{"line":66,"column":70},"source":"content/scoring.js","original":{"line":73,"column":40}},{"generated":{"line":66,"column":71},"source":"content/scoring.js","original":{"line":73,"column":4}},{"generated":{"line":66,"column":73},"source":"content/scoring.js","original":{"line":73,"column":77}},{"generated":{"line":67,"column":6},"source":"content/scoring.js","original":{"line":74,"column":6}},{"generated":{"line":67,"column":12},"source":"content/scoring.js","original":{"line":74,"column":12},"name":"text"},{"generated":{"line":67,"column":16},"source":"content/scoring.js","original":{"line":74,"column":16}},{"generated":{"line":67,"column":19},"source":"content/scoring.js","original":{"line":74,"column":19}},{"generated":{"line":67,"column":23},"source":"content/scoring.js","original":{"line":74,"column":19},"name":"extractElementText"},{"generated":{"line":67,"column":49},"source":"content/scoring.js","original":{"line":74,"column":19}},{"generated":{"line":67,"column":51},"source":"content/scoring.js","original":{"line":74,"column":38},"name":"el"},{"generated":{"line":67,"column":53},"source":"content/scoring.js","original":{"line":74,"column":19}},{"generated":{"line":67,"column":54},"source":"content/scoring.js","original":{"line":74,"column":6}},{"generated":{"line":68,"column":6},"source":"content/scoring.js","original":{"line":75,"column":6}},{"generated":{"line":68,"column":13},"source":"content/scoring.js","original":{"line":75,"column":14}},{"generated":{"line":68,"column":17},"source":"content/scoring.js","original":{"line":75,"column":14},"name":"countMatches"},{"generated":{"line":68,"column":37},"source":"content/scoring.js","original":{"line":75,"column":14}},{"generated":{"line":68,"column":39},"source":"content/scoring.js","original":{"line":75,"column":27},"name":"text"},{"generated":{"line":68,"column":43},"source":"content/scoring.js","original":{"line":75,"column":14}},{"generated":{"line":68,"column":45},"source":"content/scoring.js","original":{"line":75,"column":33}},{"generated":{"line":68,"column":50},"source":"content/scoring.js","original":{"line":75,"column":38},"name":"wordPattern"},{"generated":{"line":68,"column":61},"source":"content/scoring.js","original":{"line":75,"column":14}},{"generated":{"line":68,"column":66},"source":"content/scoring.js","original":{"line":75,"column":54}},{"generated":{"line":68,"column":71},"source":"content/scoring.js","original":{"line":75,"column":59},"name":"minNumWords"},{"generated":{"line":68,"column":82},"source":"content/scoring.js","original":{"line":75,"column":6}},{"generated":{"line":69,"column":4},"source":"content/scoring.js","original":{"line":76,"column":5}},{"generated":{"line":69,"column":5},"source":"content/scoring.js","original":{"line":73,"column":4}},{"generated":{"line":69,"column":11},"source":"content/scoring.js","original":{"line":76,"column":11}},{"generated":{"line":69,"column":18},"source":"content/scoring.js","original":{"line":76,"column":18}},{"generated":{"line":69,"column":23},"source":"content/scoring.js","original":{"line":76,"column":11}},{"generated":{"line":70,"column":2},"source":"content/scoring.js","original":{"line":77,"column":3}},{"generated":{"line":72,"column":2},"source":"content/scoring.js","original":{"line":79,"column":30}},{"generated":{"line":72,"column":9},"source":"content/scoring.js","original":{"line":79,"column":9},"name":"qualifiedTextElements"},{"generated":{"line":72,"column":30},"source":"content/scoring.js","original":{"line":79,"column":30}},{"generated":{"line":72,"column":31},"source":"content/scoring.js","original":{"line":79,"column":31},"name":"elements"},{"generated":{"line":72,"column":39},"source":"content/scoring.js","original":{"line":79,"column":30}},{"generated":{"line":72,"column":41},"source":"content/scoring.js","original":{"line":79,"column":41},"name":"withChildren"},{"generated":{"line":72,"column":53},"source":"content/scoring.js","original":{"line":79,"column":53}},{"generated":{"line":72,"column":56},"source":"content/scoring.js","original":{"line":79,"column":56}},{"generated":{"line":72,"column":60},"source":"content/scoring.js","original":{"line":79,"column":30}},{"generated":{"line":72,"column":62},"source":"content/scoring.js","original":{"line":79,"column":62}},{"generated":{"line":73,"column":4},"source":"content/scoring.js","original":{"line":80,"column":4}},{"generated":{"line":73,"column":10},"source":"content/scoring.js","original":{"line":80,"column":10},"name":"filtered"},{"generated":{"line":73,"column":18},"source":"content/scoring.js","original":{"line":80,"column":18}},{"generated":{"line":73,"column":21},"source":"content/scoring.js","original":{"line":80,"column":21}},{"generated":{"line":73,"column":25},"source":"content/scoring.js","original":{"line":80,"column":25},"name":"Set"},{"generated":{"line":73,"column":28},"source":"content/scoring.js","original":{"line":80,"column":21}},{"generated":{"line":73,"column":30},"source":"content/scoring.js","original":{"line":80,"column":4}},{"generated":{"line":74,"column":4},"source":"content/scoring.js","original":{"line":81,"column":4}},{"generated":{"line":74,"column":5},"source":"content/scoring.js","original":{"line":81,"column":5}},{"generated":{"line":74,"column":8},"source":"content/scoring.js","original":{"line":81,"column":8},"name":"elements"},{"generated":{"line":74,"column":16},"source":"content/scoring.js","original":{"line":81,"column":4}},{"generated":{"line":74,"column":18},"source":"content/scoring.js","original":{"line":81,"column":18},"name":"forEach"},{"generated":{"line":74,"column":25},"source":"content/scoring.js","original":{"line":81,"column":4}},{"generated":{"line":74,"column":26},"source":"content/scoring.js","original":{"line":81,"column":26},"name":"parent"},{"generated":{"line":74,"column":32},"source":"content/scoring.js","original":{"line":81,"column":32}},{"generated":{"line":74,"column":36},"source":"content/scoring.js","original":{"line":81,"column":36}},{"generated":{"line":75,"column":6},"source":"content/scoring.js","original":{"line":82,"column":6}},{"generated":{"line":76,"column":6},"source":"content/scoring.js","original":{"line":83,"column":6}},{"generated":{"line":76,"column":10},"source":"content/scoring.js","original":{"line":83,"column":10}},{"generated":{"line":76,"column":15},"source":"content/scoring.js","original":{"line":83,"column":15},"name":"qualifyTextElement_"},{"generated":{"line":76,"column":34},"source":"content/scoring.js","original":{"line":83,"column":10}},{"generated":{"line":76,"column":35},"source":"content/scoring.js","original":{"line":83,"column":35},"name":"parent"},{"generated":{"line":76,"column":41},"source":"content/scoring.js","original":{"line":83,"column":10}},{"generated":{"line":76,"column":42},"source":"content/scoring.js","original":{"line":83,"column":6}},{"generated":{"line":76,"column":44},"source":"content/scoring.js","original":{"line":83,"column":44},"name":"filtered"},{"generated":{"line":76,"column":52},"source":"content/scoring.js","original":{"line":83,"column":52}},{"generated":{"line":76,"column":53},"source":"content/scoring.js","original":{"line":83,"column":53},"name":"add"},{"generated":{"line":76,"column":56},"source":"content/scoring.js","original":{"line":83,"column":44}},{"generated":{"line":76,"column":57},"source":"content/scoring.js","original":{"line":83,"column":57},"name":"parent"},{"generated":{"line":76,"column":63},"source":"content/scoring.js","original":{"line":83,"column":44}},{"generated":{"line":78,"column":6},"source":"content/scoring.js","original":{"line":84,"column":6}},{"generated":{"line":78,"column":10},"source":"content/scoring.js","original":{"line":84,"column":10},"name":"withChildren"},{"generated":{"line":78,"column":22},"source":"content/scoring.js","original":{"line":84,"column":22}},{"generated":{"line":78,"column":26},"source":"content/scoring.js","original":{"line":84,"column":27},"name":"parent"},{"generated":{"line":78,"column":32},"source":"content/scoring.js","original":{"line":84,"column":33}},{"generated":{"line":78,"column":44},"source":"content/scoring.js","original":{"line":84,"column":45},"name":"HTMLElement"},{"generated":{"line":78,"column":55},"source":"content/scoring.js","original":{"line":84,"column":6}},{"generated":{"line":78,"column":57},"source":"content/scoring.js","original":{"line":84,"column":59}},{"generated":{"line":79,"column":8},"source":"content/scoring.js","original":{"line":85,"column":8}},{"generated":{"line":79,"column":9},"source":"content/scoring.js","original":{"line":85,"column":9}},{"generated":{"line":79,"column":12},"source":"content/scoring.js","original":{"line":85,"column":12},"name":"parent"},{"generated":{"line":79,"column":18},"source":"content/scoring.js","original":{"line":85,"column":18}},{"generated":{"line":79,"column":19},"source":"content/scoring.js","original":{"line":85,"column":19},"name":"querySelectorAll"},{"generated":{"line":79,"column":35},"source":"content/scoring.js","original":{"line":85,"column":12}},{"generated":{"line":79,"column":36},"source":"content/scoring.js","original":{"line":85,"column":36}},{"generated":{"line":79,"column":41},"source":"content/scoring.js","original":{"line":85,"column":41},"name":"textNodesSelector"},{"generated":{"line":79,"column":58},"source":"content/scoring.js","original":{"line":85,"column":12}},{"generated":{"line":79,"column":59},"source":"content/scoring.js","original":{"line":85,"column":8}},{"generated":{"line":79,"column":61},"source":"content/scoring.js","original":{"line":86,"column":11},"name":"filter"},{"generated":{"line":79,"column":67},"source":"content/scoring.js","original":{"line":85,"column":8}},{"generated":{"line":79,"column":68},"source":"content/scoring.js","original":{"line":86,"column":18},"name":"el"},{"generated":{"line":79,"column":70},"source":"content/scoring.js","original":{"line":86,"column":20}},{"generated":{"line":79,"column":74},"source":"content/scoring.js","original":{"line":86,"column":24}},{"generated":{"line":79,"column":79},"source":"content/scoring.js","original":{"line":86,"column":29},"name":"qualifyTextElement_"},{"generated":{"line":79,"column":98},"source":"content/scoring.js","original":{"line":86,"column":24}},{"generated":{"line":79,"column":99},"source":"content/scoring.js","original":{"line":86,"column":49},"name":"el"},{"generated":{"line":79,"column":101},"source":"content/scoring.js","original":{"line":86,"column":24}},{"generated":{"line":79,"column":102},"source":"content/scoring.js","original":{"line":85,"column":8}},{"generated":{"line":79,"column":104},"source":"content/scoring.js","original":{"line":87,"column":11},"name":"map"},{"generated":{"line":79,"column":107},"source":"content/scoring.js","original":{"line":85,"column":8}},{"generated":{"line":79,"column":108},"source":"content/scoring.js","original":{"line":87,"column":15},"name":"el"},{"generated":{"line":79,"column":110},"source":"content/scoring.js","original":{"line":87,"column":17}},{"generated":{"line":79,"column":114},"source":"content/scoring.js","original":{"line":87,"column":21},"name":"filtered"},{"generated":{"line":79,"column":122},"source":"content/scoring.js","original":{"line":87,"column":29}},{"generated":{"line":79,"column":123},"source":"content/scoring.js","original":{"line":87,"column":30},"name":"add"},{"generated":{"line":79,"column":126},"source":"content/scoring.js","original":{"line":87,"column":21}},{"generated":{"line":79,"column":127},"source":"content/scoring.js","original":{"line":87,"column":34},"name":"el"},{"generated":{"line":79,"column":129},"source":"content/scoring.js","original":{"line":87,"column":21}},{"generated":{"line":79,"column":130},"source":"content/scoring.js","original":{"line":85,"column":8}},{"generated":{"line":80,"column":6},"source":"content/scoring.js","original":{"line":88,"column":7}},{"generated":{"line":81,"column":4},"source":"content/scoring.js","original":{"line":89,"column":5}},{"generated":{"line":81,"column":5},"source":"content/scoring.js","original":{"line":81,"column":4}},{"generated":{"line":82,"column":4},"source":"content/scoring.js","original":{"line":90,"column":4}},{"generated":{"line":82,"column":11},"source":"content/scoring.js","original":{"line":90,"column":11}},{"generated":{"line":82,"column":12},"source":"content/scoring.js","original":{"line":90,"column":12}},{"generated":{"line":82,"column":15},"source":"content/scoring.js","original":{"line":90,"column":15},"name":"filtered"},{"generated":{"line":82,"column":23},"source":"content/scoring.js","original":{"line":90,"column":11}},{"generated":{"line":82,"column":24},"source":"content/scoring.js","original":{"line":90,"column":4}},{"generated":{"line":83,"column":2},"source":"content/scoring.js","original":{"line":91,"column":3}},{"generated":{"line":85,"column":2},"source":"content/scoring.js","original":{"line":93,"column":29}},{"generated":{"line":85,"column":9},"source":"content/scoring.js","original":{"line":93,"column":9},"name":"setNegativityValues_"},{"generated":{"line":85,"column":29},"source":"content/scoring.js","original":{"line":93,"column":29}},{"generated":{"line":85,"column":30},"source":"content/scoring.js","original":{"line":93,"column":30},"name":"elements"},{"generated":{"line":85,"column":38},"source":"content/scoring.js","original":{"line":93,"column":29}},{"generated":{"line":85,"column":40},"source":"content/scoring.js","original":{"line":93,"column":40},"name":"values"},{"generated":{"line":85,"column":46},"source":"content/scoring.js","original":{"line":93,"column":29}},{"generated":{"line":85,"column":48},"source":"content/scoring.js","original":{"line":93,"column":48}},{"generated":{"line":86,"column":4},"source":"content/scoring.js","original":{"line":94,"column":4},"name":"elements"},{"generated":{"line":86,"column":12},"source":"content/scoring.js","original":{"line":94,"column":12}},{"generated":{"line":86,"column":13},"source":"content/scoring.js","original":{"line":94,"column":13},"name":"forEach"},{"generated":{"line":86,"column":20},"source":"content/scoring.js","original":{"line":94,"column":4}},{"generated":{"line":86,"column":21},"source":"content/scoring.js","original":{"line":94,"column":21}},{"generated":{"line":86,"column":22},"source":"content/scoring.js","original":{"line":94,"column":22},"name":"el"},{"generated":{"line":86,"column":24},"source":"content/scoring.js","original":{"line":94,"column":21}},{"generated":{"line":86,"column":26},"source":"content/scoring.js","original":{"line":94,"column":26},"name":"i"},{"generated":{"line":86,"column":27},"source":"content/scoring.js","original":{"line":94,"column":21}},{"generated":{"line":86,"column":32},"source":"content/scoring.js","original":{"line":94,"column":32}},{"generated":{"line":87,"column":6},"source":"content/scoring.js","original":{"line":95,"column":6},"name":"el"},{"generated":{"line":87,"column":8},"source":"content/scoring.js","original":{"line":95,"column":8}},{"generated":{"line":87,"column":9},"source":"content/scoring.js","original":{"line":95,"column":9},"name":"classList"},{"generated":{"line":87,"column":18},"source":"content/scoring.js","original":{"line":95,"column":6}},{"generated":{"line":87,"column":19},"source":"content/scoring.js","original":{"line":95,"column":19},"name":"add"},{"generated":{"line":87,"column":22},"source":"content/scoring.js","original":{"line":95,"column":6}},{"generated":{"line":87,"column":23},"source":"content/scoring.js","original":{"line":95,"column":23},"name":"scoredTextsClassName"},{"generated":{"line":87,"column":51},"source":"content/scoring.js","original":{"line":95,"column":6}},{"generated":{"line":88,"column":6},"source":"content/scoring.js","original":{"line":96,"column":6},"name":"el"},{"generated":{"line":88,"column":8},"source":"content/scoring.js","original":{"line":96,"column":8}},{"generated":{"line":88,"column":9},"source":"content/scoring.js","original":{"line":96,"column":9},"name":"setAttribute"},{"generated":{"line":88,"column":21},"source":"content/scoring.js","original":{"line":96,"column":6}},{"generated":{"line":88,"column":22},"source":"content/scoring.js","original":{"line":96,"column":22},"name":"scoredTextsValueAtt"},{"generated":{"line":88,"column":49},"source":"content/scoring.js","original":{"line":96,"column":6}},{"generated":{"line":88,"column":51},"source":"content/scoring.js","original":{"line":96,"column":43},"name":"values"},{"generated":{"line":88,"column":57},"source":"content/scoring.js","original":{"line":96,"column":49}},{"generated":{"line":88,"column":58},"source":"content/scoring.js","original":{"line":96,"column":50},"name":"i"},{"generated":{"line":88,"column":59},"source":"content/scoring.js","original":{"line":96,"column":49}},{"generated":{"line":88,"column":60},"source":"content/scoring.js","original":{"line":96,"column":6}},{"generated":{"line":89,"column":4},"source":"content/scoring.js","original":{"line":97,"column":5}},{"generated":{"line":89,"column":5},"source":"content/scoring.js","original":{"line":94,"column":4}},{"generated":{"line":90,"column":2},"source":"content/scoring.js","original":{"line":98,"column":3}},{"generated":{"line":92,"column":2},"source":"content/scoring.js","original":{"line":100,"column":31}},{"generated":{"line":92,"column":9},"source":"content/scoring.js","original":{"line":100,"column":9},"name":"updateNegativityRanks_"},{"generated":{"line":92,"column":31},"source":"content/scoring.js","original":{"line":100,"column":31}},{"generated":{"line":92,"column":32},"source":"content/scoring.js","original":{"line":100,"column":32},"name":"elements"},{"generated":{"line":92,"column":40},"source":"content/scoring.js","original":{"line":100,"column":31}},{"generated":{"line":92,"column":42},"source":"content/scoring.js","original":{"line":100,"column":42}},{"generated":{"line":93,"column":4},"source":"content/scoring.js","original":{"line":101,"column":4}},{"generated":{"line":93,"column":10},"source":"content/scoring.js","original":{"line":101,"column":10},"name":"ranks"},{"generated":{"line":93,"column":15},"source":"content/scoring.js","original":{"line":101,"column":15}},{"generated":{"line":93,"column":18},"source":"content/scoring.js","original":{"line":101,"column":18}},{"generated":{"line":93,"column":23},"source":"content/scoring.js","original":{"line":101,"column":23},"name":"arrayDenseRanks_"},{"generated":{"line":93,"column":39},"source":"content/scoring.js","original":{"line":101,"column":18}},{"generated":{"line":93,"column":40},"source":"content/scoring.js","original":{"line":101,"column":40}},{"generated":{"line":93,"column":45},"source":"content/scoring.js","original":{"line":101,"column":45},"name":"negativityValues_"},{"generated":{"line":93,"column":62},"source":"content/scoring.js","original":{"line":101,"column":40}},{"generated":{"line":93,"column":63},"source":"content/scoring.js","original":{"line":101,"column":63},"name":"elements"},{"generated":{"line":93,"column":71},"source":"content/scoring.js","original":{"line":101,"column":40}},{"generated":{"line":93,"column":72},"source":"content/scoring.js","original":{"line":101,"column":18}},{"generated":{"line":93,"column":73},"source":"content/scoring.js","original":{"line":101,"column":4}},{"generated":{"line":94,"column":4},"source":"content/scoring.js","original":{"line":102,"column":4}},{"generated":{"line":94,"column":10},"source":"content/scoring.js","original":{"line":102,"column":10},"name":"maxRank"},{"generated":{"line":94,"column":17},"source":"content/scoring.js","original":{"line":102,"column":17}},{"generated":{"line":94,"column":20},"source":"content/scoring.js","original":{"line":102,"column":20},"name":"Math"},{"generated":{"line":94,"column":24},"source":"content/scoring.js","original":{"line":102,"column":24}},{"generated":{"line":94,"column":25},"source":"content/scoring.js","original":{"line":102,"column":25},"name":"max"},{"generated":{"line":94,"column":28},"source":"content/scoring.js","original":{"line":102,"column":20}},{"generated":{"line":94,"column":29},"source":"content/scoring.js","original":{"line":102,"column":29},"name":"apply"},{"generated":{"line":94,"column":34},"source":"content/scoring.js","original":{"line":102,"column":20}},{"generated":{"line":94,"column":35},"source":"content/scoring.js","original":{"line":102,"column":35}},{"generated":{"line":94,"column":39},"source":"content/scoring.js","original":{"line":102,"column":20}},{"generated":{"line":94,"column":41},"source":"content/scoring.js","original":{"line":102,"column":41},"name":"ranks"},{"generated":{"line":94,"column":46},"source":"content/scoring.js","original":{"line":102,"column":20}},{"generated":{"line":94,"column":47},"source":"content/scoring.js","original":{"line":102,"column":4}},{"generated":{"line":95,"column":4},"source":"content/scoring.js","original":{"line":103,"column":4},"name":"elements"},{"generated":{"line":95,"column":12},"source":"content/scoring.js","original":{"line":103,"column":12}},{"generated":{"line":95,"column":13},"source":"content/scoring.js","original":{"line":103,"column":13},"name":"forEach"},{"generated":{"line":95,"column":20},"source":"content/scoring.js","original":{"line":103,"column":4}},{"generated":{"line":95,"column":21},"source":"content/scoring.js","original":{"line":103,"column":21}},{"generated":{"line":95,"column":22},"source":"content/scoring.js","original":{"line":103,"column":22},"name":"el"},{"generated":{"line":95,"column":24},"source":"content/scoring.js","original":{"line":103,"column":21}},{"generated":{"line":95,"column":26},"source":"content/scoring.js","original":{"line":103,"column":26},"name":"i"},{"generated":{"line":95,"column":27},"source":"content/scoring.js","original":{"line":103,"column":21}},{"generated":{"line":95,"column":32},"source":"content/scoring.js","original":{"line":103,"column":32}},{"generated":{"line":96,"column":6},"source":"content/scoring.js","original":{"line":104,"column":6},"name":"el"},{"generated":{"line":96,"column":8},"source":"content/scoring.js","original":{"line":104,"column":8}},{"generated":{"line":96,"column":9},"source":"content/scoring.js","original":{"line":104,"column":9},"name":"setAttribute"},{"generated":{"line":96,"column":21},"source":"content/scoring.js","original":{"line":104,"column":6}},{"generated":{"line":96,"column":22},"source":"content/scoring.js","original":{"line":104,"column":22},"name":"scoredTextsRankAtt"},{"generated":{"line":96,"column":48},"source":"content/scoring.js","original":{"line":104,"column":6}},{"generated":{"line":96,"column":50},"source":"content/scoring.js","original":{"line":104,"column":42},"name":"ranks"},{"generated":{"line":96,"column":55},"source":"content/scoring.js","original":{"line":104,"column":47}},{"generated":{"line":96,"column":56},"source":"content/scoring.js","original":{"line":104,"column":48},"name":"i"},{"generated":{"line":96,"column":57},"source":"content/scoring.js","original":{"line":104,"column":47}},{"generated":{"line":96,"column":58},"source":"content/scoring.js","original":{"line":104,"column":42}},{"generated":{"line":96,"column":61},"source":"content/scoring.js","original":{"line":104,"column":53},"name":"maxRank"},{"generated":{"line":96,"column":68},"source":"content/scoring.js","original":{"line":104,"column":6}},{"generated":{"line":97,"column":4},"source":"content/scoring.js","original":{"line":105,"column":5}},{"generated":{"line":97,"column":5},"source":"content/scoring.js","original":{"line":103,"column":4}},{"generated":{"line":98,"column":2},"source":"content/scoring.js","original":{"line":106,"column":3}},{"generated":{"line":100,"column":2},"source":"content/scoring.js","original":{"line":108,"column":25}},{"generated":{"line":100,"column":9},"source":"content/scoring.js","original":{"line":108,"column":9},"name":"removeAllValues_"},{"generated":{"line":100,"column":25},"source":"content/scoring.js","original":{"line":108,"column":25}},{"generated":{"line":100,"column":26},"source":"content/scoring.js","original":{"line":108,"column":26},"name":"elements"},{"generated":{"line":100,"column":34},"source":"content/scoring.js","original":{"line":108,"column":25}},{"generated":{"line":100,"column":36},"source":"content/scoring.js","original":{"line":108,"column":36}},{"generated":{"line":101,"column":4},"source":"content/scoring.js","original":{"line":109,"column":4},"name":"elements"},{"generated":{"line":101,"column":12},"source":"content/scoring.js","original":{"line":109,"column":12}},{"generated":{"line":101,"column":13},"source":"content/scoring.js","original":{"line":109,"column":13},"name":"forEach"},{"generated":{"line":101,"column":20},"source":"content/scoring.js","original":{"line":109,"column":4}},{"generated":{"line":101,"column":21},"source":"content/scoring.js","original":{"line":109,"column":22},"name":"el"},{"generated":{"line":101,"column":23},"source":"content/scoring.js","original":{"line":109,"column":21}},{"generated":{"line":101,"column":27},"source":"content/scoring.js","original":{"line":109,"column":29}},{"generated":{"line":102,"column":6},"source":"content/scoring.js","original":{"line":110,"column":6},"name":"el"},{"generated":{"line":102,"column":8},"source":"content/scoring.js","original":{"line":110,"column":8}},{"generated":{"line":102,"column":9},"source":"content/scoring.js","original":{"line":110,"column":9},"name":"classList"},{"generated":{"line":102,"column":18},"source":"content/scoring.js","original":{"line":110,"column":6}},{"generated":{"line":102,"column":19},"source":"content/scoring.js","original":{"line":110,"column":19},"name":"remove"},{"generated":{"line":102,"column":25},"source":"content/scoring.js","original":{"line":110,"column":6}},{"generated":{"line":102,"column":26},"source":"content/scoring.js","original":{"line":110,"column":26},"name":"scoredTextsClassName"},{"generated":{"line":102,"column":54},"source":"content/scoring.js","original":{"line":110,"column":6}},{"generated":{"line":103,"column":6},"source":"content/scoring.js","original":{"line":111,"column":6},"name":"el"},{"generated":{"line":103,"column":8},"source":"content/scoring.js","original":{"line":111,"column":8}},{"generated":{"line":103,"column":9},"source":"content/scoring.js","original":{"line":111,"column":9},"name":"removeAttribute"},{"generated":{"line":103,"column":24},"source":"content/scoring.js","original":{"line":111,"column":6}},{"generated":{"line":103,"column":25},"source":"content/scoring.js","original":{"line":111,"column":25},"name":"scoredTextsValueAtt"},{"generated":{"line":103,"column":52},"source":"content/scoring.js","original":{"line":111,"column":6}},{"generated":{"line":104,"column":6},"source":"content/scoring.js","original":{"line":112,"column":6},"name":"el"},{"generated":{"line":104,"column":8},"source":"content/scoring.js","original":{"line":112,"column":8}},{"generated":{"line":104,"column":9},"source":"content/scoring.js","original":{"line":112,"column":9},"name":"removeAttribute"},{"generated":{"line":104,"column":24},"source":"content/scoring.js","original":{"line":112,"column":6}},{"generated":{"line":104,"column":25},"source":"content/scoring.js","original":{"line":112,"column":25},"name":"scoredTextsRankAtt"},{"generated":{"line":104,"column":51},"source":"content/scoring.js","original":{"line":112,"column":6}},{"generated":{"line":105,"column":4},"source":"content/scoring.js","original":{"line":113,"column":5}},{"generated":{"line":105,"column":5},"source":"content/scoring.js","original":{"line":109,"column":4}},{"generated":{"line":106,"column":2},"source":"content/scoring.js","original":{"line":114,"column":3}},{"generated":{"line":108,"column":2},"source":"content/scoring.js","original":{"line":116,"column":26}},{"generated":{"line":108,"column":9},"source":"content/scoring.js","original":{"line":116,"column":9},"name":"negativityValues_"},{"generated":{"line":108,"column":26},"source":"content/scoring.js","original":{"line":116,"column":26}},{"generated":{"line":108,"column":27},"source":"content/scoring.js","original":{"line":116,"column":27},"name":"elements"},{"generated":{"line":108,"column":35},"source":"content/scoring.js","original":{"line":116,"column":26}},{"generated":{"line":108,"column":37},"source":"content/scoring.js","original":{"line":116,"column":37}},{"generated":{"line":109,"column":4},"source":"content/scoring.js","original":{"line":117,"column":4}},{"generated":{"line":109,"column":11},"source":"content/scoring.js","original":{"line":117,"column":11}},{"generated":{"line":109,"column":12},"source":"content/scoring.js","original":{"line":117,"column":12}},{"generated":{"line":109,"column":15},"source":"content/scoring.js","original":{"line":117,"column":15},"name":"elements"},{"generated":{"line":109,"column":23},"source":"content/scoring.js","original":{"line":117,"column":11}},{"generated":{"line":109,"column":25},"source":"content/scoring.js","original":{"line":117,"column":25},"name":"map"},{"generated":{"line":109,"column":28},"source":"content/scoring.js","original":{"line":117,"column":11}},{"generated":{"line":109,"column":29},"source":"content/scoring.js","original":{"line":117,"column":30},"name":"el"},{"generated":{"line":109,"column":31},"source":"content/scoring.js","original":{"line":117,"column":29}},{"generated":{"line":109,"column":35},"source":"content/scoring.js","original":{"line":117,"column":37},"name":"parseFloat"},{"generated":{"line":109,"column":45},"source":"content/scoring.js","original":{"line":117,"column":47}},{"generated":{"line":109,"column":46},"source":"content/scoring.js","original":{"line":117,"column":48},"name":"el"},{"generated":{"line":109,"column":48},"source":"content/scoring.js","original":{"line":117,"column":50}},{"generated":{"line":109,"column":49},"source":"content/scoring.js","original":{"line":117,"column":51},"name":"getAttribute"},{"generated":{"line":109,"column":61},"source":"content/scoring.js","original":{"line":117,"column":48}},{"generated":{"line":109,"column":62},"source":"content/scoring.js","original":{"line":117,"column":64},"name":"scoredTextsValueAtt"},{"generated":{"line":109,"column":89},"source":"content/scoring.js","original":{"line":117,"column":48}},{"generated":{"line":109,"column":90},"source":"content/scoring.js","original":{"line":117,"column":47}},{"generated":{"line":109,"column":91},"source":"content/scoring.js","original":{"line":117,"column":11}},{"generated":{"line":109,"column":92},"source":"content/scoring.js","original":{"line":117,"column":4}},{"generated":{"line":110,"column":2},"source":"content/scoring.js","original":{"line":118,"column":3}},{"generated":{"line":112,"column":2},"source":"content/scoring.js","original":{"line":120,"column":25}},{"generated":{"line":112,"column":9},"source":"content/scoring.js","original":{"line":120,"column":9},"name":"arrayDenseRanks_"},{"generated":{"line":112,"column":25},"source":"content/scoring.js","original":{"line":120,"column":25}},{"generated":{"line":112,"column":26},"source":"content/scoring.js","original":{"line":120,"column":26},"name":"arr"},{"generated":{"line":112,"column":29},"source":"content/scoring.js","original":{"line":120,"column":25}},{"generated":{"line":112,"column":31},"source":"content/scoring.js","original":{"line":120,"column":31}},{"generated":{"line":113,"column":4},"source":"content/scoring.js","original":{"line":121,"column":4}},{"generated":{"line":113,"column":10},"source":"content/scoring.js","original":{"line":121,"column":10},"name":"sorted"},{"generated":{"line":113,"column":16},"source":"content/scoring.js","original":{"line":121,"column":16}},{"generated":{"line":113,"column":19},"source":"content/scoring.js","original":{"line":121,"column":19},"name":"Array"},{"generated":{"line":113,"column":24},"source":"content/scoring.js","original":{"line":121,"column":24}},{"generated":{"line":113,"column":25},"source":"content/scoring.js","original":{"line":121,"column":25},"name":"from"},{"generated":{"line":113,"column":29},"source":"content/scoring.js","original":{"line":121,"column":19}},{"generated":{"line":113,"column":30},"source":"content/scoring.js","original":{"line":121,"column":30}},{"generated":{"line":113,"column":34},"source":"content/scoring.js","original":{"line":121,"column":34},"name":"Set"},{"generated":{"line":113,"column":37},"source":"content/scoring.js","original":{"line":121,"column":30}},{"generated":{"line":113,"column":38},"source":"content/scoring.js","original":{"line":121,"column":38},"name":"arr"},{"generated":{"line":113,"column":41},"source":"content/scoring.js","original":{"line":121,"column":30}},{"generated":{"line":113,"column":42},"source":"content/scoring.js","original":{"line":121,"column":19}},{"generated":{"line":113,"column":44},"source":"content/scoring.js","original":{"line":121,"column":44},"name":"sort"},{"generated":{"line":113,"column":48},"source":"content/scoring.js","original":{"line":121,"column":19}},{"generated":{"line":113,"column":49},"source":"content/scoring.js","original":{"line":121,"column":49}},{"generated":{"line":113,"column":50},"source":"content/scoring.js","original":{"line":121,"column":50},"name":"a"},{"generated":{"line":113,"column":51},"source":"content/scoring.js","original":{"line":121,"column":49}},{"generated":{"line":113,"column":53},"source":"content/scoring.js","original":{"line":121,"column":53},"name":"b"},{"generated":{"line":113,"column":54},"source":"content/scoring.js","original":{"line":121,"column":49}},{"generated":{"line":113,"column":59},"source":"content/scoring.js","original":{"line":121,"column":59},"name":"a"},{"generated":{"line":113,"column":60},"source":"content/scoring.js","original":{"line":121,"column":60}},{"generated":{"line":113,"column":63},"source":"content/scoring.js","original":{"line":121,"column":63},"name":"b"},{"generated":{"line":113,"column":64},"source":"content/scoring.js","original":{"line":121,"column":19}},{"generated":{"line":113,"column":65},"source":"content/scoring.js","original":{"line":121,"column":4}},{"generated":{"line":114,"column":4},"source":"content/scoring.js","original":{"line":122,"column":4}},{"generated":{"line":114,"column":10},"source":"content/scoring.js","original":{"line":122,"column":10},"name":"ranks"},{"generated":{"line":114,"column":15},"source":"content/scoring.js","original":{"line":122,"column":15}},{"generated":{"line":114,"column":18},"source":"content/scoring.js","original":{"line":122,"column":18},"name":"arr"},{"generated":{"line":114,"column":21},"source":"content/scoring.js","original":{"line":122,"column":21}},{"generated":{"line":114,"column":22},"source":"content/scoring.js","original":{"line":122,"column":22},"name":"map"},{"generated":{"line":114,"column":25},"source":"content/scoring.js","original":{"line":122,"column":18}},{"generated":{"line":114,"column":26},"source":"content/scoring.js","original":{"line":122,"column":27},"name":"v"},{"generated":{"line":114,"column":27},"source":"content/scoring.js","original":{"line":122,"column":26}},{"generated":{"line":114,"column":31},"source":"content/scoring.js","original":{"line":122,"column":33},"name":"sorted"},{"generated":{"line":114,"column":37},"source":"content/scoring.js","original":{"line":122,"column":39}},{"generated":{"line":114,"column":38},"source":"content/scoring.js","original":{"line":122,"column":40},"name":"indexOf"},{"generated":{"line":114,"column":45},"source":"content/scoring.js","original":{"line":122,"column":33}},{"generated":{"line":114,"column":46},"source":"content/scoring.js","original":{"line":122,"column":48},"name":"v"},{"generated":{"line":114,"column":47},"source":"content/scoring.js","original":{"line":122,"column":33}},{"generated":{"line":114,"column":51},"source":"content/scoring.js","original":{"line":122,"column":53}},{"generated":{"line":114,"column":52},"source":"content/scoring.js","original":{"line":122,"column":18}},{"generated":{"line":114,"column":53},"source":"content/scoring.js","original":{"line":122,"column":4}},{"generated":{"line":115,"column":4},"source":"content/scoring.js","original":{"line":123,"column":4}},{"generated":{"line":115,"column":11},"source":"content/scoring.js","original":{"line":123,"column":11},"name":"ranks"},{"generated":{"line":115,"column":16},"source":"content/scoring.js","original":{"line":123,"column":4}},{"generated":{"line":116,"column":2},"source":"content/scoring.js","original":{"line":124,"column":3}},{"generated":{"line":118,"column":2},"source":"content/scoring.js","original":{"line":126,"column":24}},{"generated":{"line":118,"column":9},"source":"content/scoring.js","original":{"line":126,"column":9},"name":"calculateStats_"},{"generated":{"line":118,"column":24},"source":"content/scoring.js","original":{"line":126,"column":24}},{"generated":{"line":118,"column":25},"source":"content/scoring.js","original":{"line":126,"column":25},"name":"elements"},{"generated":{"line":118,"column":33},"source":"content/scoring.js","original":{"line":126,"column":24}},{"generated":{"line":118,"column":35},"source":"content/scoring.js","original":{"line":126,"column":35}},{"generated":{"line":119,"column":4},"source":"content/scoring.js","original":{"line":127,"column":4}},{"generated":{"line":119,"column":10},"source":"content/scoring.js","original":{"line":127,"column":10},"name":"values"},{"generated":{"line":119,"column":16},"source":"content/scoring.js","original":{"line":127,"column":16}},{"generated":{"line":119,"column":19},"source":"content/scoring.js","original":{"line":127,"column":19}},{"generated":{"line":119,"column":24},"source":"content/scoring.js","original":{"line":127,"column":24},"name":"negativityValues_"},{"generated":{"line":119,"column":41},"source":"content/scoring.js","original":{"line":127,"column":19}},{"generated":{"line":119,"column":42},"source":"content/scoring.js","original":{"line":127,"column":42},"name":"elements"},{"generated":{"line":119,"column":50},"source":"content/scoring.js","original":{"line":127,"column":19}},{"generated":{"line":119,"column":51},"source":"content/scoring.js","original":{"line":127,"column":4}},{"generated":{"line":120,"column":4},"source":"content/scoring.js","original":{"line":128,"column":4}},{"generated":{"line":120,"column":11},"source":"content/scoring.js","original":{"line":128,"column":11}},{"generated":{"line":121,"column":6},"source":"content/scoring.js","original":{"line":129,"column":6},"name":"negatives"},{"generated":{"line":121,"column":15},"source":"content/scoring.js","original":{"line":129,"column":15}},{"generated":{"line":121,"column":17},"source":"content/scoring.js","original":{"line":129,"column":17},"name":"values"},{"generated":{"line":121,"column":23},"source":"content/scoring.js","original":{"line":129,"column":23}},{"generated":{"line":121,"column":24},"source":"content/scoring.js","original":{"line":129,"column":24},"name":"filter"},{"generated":{"line":121,"column":30},"source":"content/scoring.js","original":{"line":129,"column":17}},{"generated":{"line":121,"column":31},"source":"content/scoring.js","original":{"line":129,"column":32},"name":"v"},{"generated":{"line":121,"column":32},"source":"content/scoring.js","original":{"line":129,"column":31}},{"generated":{"line":121,"column":36},"source":"content/scoring.js","original":{"line":129,"column":38},"name":"v"},{"generated":{"line":121,"column":37},"source":"content/scoring.js","original":{"line":129,"column":39}},{"generated":{"line":121,"column":40},"source":"content/scoring.js","original":{"line":129,"column":42}},{"generated":{"line":121,"column":43},"source":"content/scoring.js","original":{"line":129,"column":17}},{"generated":{"line":121,"column":45},"source":"content/scoring.js","original":{"line":129,"column":47},"name":"length"},{"generated":{"line":121,"column":51},"source":"content/scoring.js","original":{"line":128,"column":11}},{"generated":{"line":122,"column":6},"source":"content/scoring.js","original":{"line":130,"column":6},"name":"total"},{"generated":{"line":122,"column":11},"source":"content/scoring.js","original":{"line":130,"column":11}},{"generated":{"line":122,"column":13},"source":"content/scoring.js","original":{"line":130,"column":13},"name":"values"},{"generated":{"line":122,"column":19},"source":"content/scoring.js","original":{"line":130,"column":19}},{"generated":{"line":122,"column":20},"source":"content/scoring.js","original":{"line":130,"column":20},"name":"length"},{"generated":{"line":123,"column":4},"source":"content/scoring.js","original":{"line":128,"column":11}},{"generated":{"line":123,"column":5},"source":"content/scoring.js","original":{"line":128,"column":4}},{"generated":{"line":124,"column":2},"source":"content/scoring.js","original":{"line":132,"column":3}},{"generated":{"line":126,"column":0},"source":"content/scoring.js","original":{"line":17,"column":30}}],"sources":{"content/scoring.js":"import {\r\n  scoredTextsClassName,\r\n  scoredTextsValueAtt,\r\n  scoredTextsRankAtt,\r\n  countMatches,\r\n  extractElementText,\r\n  domain,\r\n} from './common.js';\r\n\r\nimport { defaultSettings } from '../settings.js'\r\n\r\nimport { PythonBackendNegativity, JSNegativityVader, JSNegativityAFINN } from './backends.js';\r\n\r\n/**\r\n * Processes and updates negativity data for elements\r\n */\r\nexport class NegativityScorer {\r\n  // constants\r\n  static textNodesSelector = \r\n    'div,h1,h2,h3,h4,h5,p,span,li,a,img,strong,em,\\\r\n    font,big,small,b,i,u,td,yt-formatted-string';\r\n  static wordPattern = /[a-z]{3,}/gi;\r\n  static minNumWords = 5;\r\n  static minNumElements = 5;\r\n  // state\r\n  static stats;\r\n  static settings_ = {};\r\n\r\n  static backends = {\r\n    'pyflair': PythonBackendNegativity,\r\n    'jsvader': JSNegativityVader,\r\n    'jsafinn': JSNegativityAFINN,\r\n  };\r\n\r\n  static updateAll(restyleCallback) {    \r\n    chrome.storage.local.get(\r\n      {\r\n        storedSettings: { global: defaultSettings },\r\n      },\r\n      (stored) => {\r\n        this.settings_ = stored.storedSettings[domain()] || stored.storedSettings.global;\r\n        this.updateAll_(restyleCallback);\r\n      });\r\n  }\r\n\r\n  static updateAll_(restyleCallback) {\r\n    const allElements = this.qualifiedTextElements(document.querySelectorAll(\"*\"), false);\r\n    this.removeAllValues_(allElements);\r\n    if (\r\n        (this.settings_.enabled) && \r\n        (this.settings_.backend != 'off') && \r\n        (allElements.length >= this.minNumElements)\r\n        ) {\r\n      // console.log(`scoring ${allElements.length} text elements`);\r\n      // claculations need to be done\r\n      this.backends[this.settings_.backend].processElements(\r\n        allElements,\r\n        (chunkElements, chunkValues) => {\r\n          this.setNegativityValues_(chunkElements, chunkValues);\r\n          // update all ranks for all elements\r\n          this.updateNegativityRanks_(allElements);\r\n          this.stats = this.calculateStats_(allElements);\r\n          restyleCallback();\r\n        });\r\n    } else {\r\n      // reset all\r\n      this.stats = {};\r\n      restyleCallback();\r\n    }\r\n  }\r\n\r\n  static qualifyTextElement_(el) {\r\n    if ((el instanceof HTMLElement) && (el.matches(this.textNodesSelector))) {\r\n      const text = extractElementText(el);\r\n      return (countMatches(text, this.wordPattern) >= this.minNumWords);\r\n    } else return false;\r\n  }\r\n\r\n  static qualifiedTextElements(elements, withChildren = true) {\r\n    const filtered = new Set();\r\n    [...elements].forEach(parent => {\r\n      // check the element\r\n      if (this.qualifyTextElement_(parent)) filtered.add(parent);\r\n      if (withChildren && (parent instanceof HTMLElement)) {\r\n        [...parent.querySelectorAll(this.textNodesSelector)]\r\n          .filter(el => this.qualifyTextElement_(el))\r\n          .map(el => filtered.add(el));\r\n      }\r\n    });\r\n    return [...filtered];\r\n  }\r\n\r\n  static setNegativityValues_(elements, values) {\r\n    elements.forEach((el, i) => {\r\n      el.classList.add(scoredTextsClassName);\r\n      el.setAttribute(scoredTextsValueAtt, values[i]);\r\n    });\r\n  }\r\n\r\n  static updateNegativityRanks_(elements) {\r\n    const ranks = this.arrayDenseRanks_(this.negativityValues_(elements));\r\n    const maxRank = Math.max.apply(null, ranks);\r\n    elements.forEach((el, i) => {\r\n      el.setAttribute(scoredTextsRankAtt, ranks[i] / maxRank);\r\n    });\r\n  }\r\n\r\n  static removeAllValues_(elements) {\r\n    elements.forEach((el) => {\r\n      el.classList.remove(scoredTextsClassName);\r\n      el.removeAttribute(scoredTextsValueAtt);\r\n      el.removeAttribute(scoredTextsRankAtt);\r\n    });\r\n  }\r\n\r\n  static negativityValues_(elements) {\r\n    return [...elements].map((el) => parseFloat(el.getAttribute(scoredTextsValueAtt)));\r\n  }\r\n\r\n  static arrayDenseRanks_(arr) {\r\n    const sorted = Array.from(new Set(arr)).sort((a, b) => a - b);\r\n    const ranks = arr.map((v) => sorted.indexOf(v) + 1);\r\n    return ranks;\r\n  }\r\n\r\n  static calculateStats_(elements) {\r\n    const values = this.negativityValues_(elements);\r\n    return {\r\n      negatives: values.filter((v) => v > 0.5).length,\r\n      total: values.length,\r\n    };\r\n  }\r\n}\r\n"},"lineCount":null}},"error":null,"hash":"88d136315c91a0bde4fb689690632811","cacheData":{"env":{}}}